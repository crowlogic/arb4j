\documentclass{article}
\usepackage[english]{babel}
\usepackage{latexsym}

%%%%%%%%%% Start TeXmacs macros
\newenvironment{proof}{\noindent\textbf{Proof\ }}{\hspace*{\fill}$\Box$\medskip}
\newtheorem{theorem}{Theorem}
%%%%%%%%%% End TeXmacs macros

%


\begin{document}

\begin{theorem}
  The following identity holds:
  \begin{equation}
    \tanh (\log (1 + x^2)) = \frac{(x^2 + 1)^2 - 1}{(x^2 + 1)^2 + 1}
  \end{equation}
\end{theorem}

\begin{proof}
  Beginning with the definition of the hyperbolic tangent function:
  \begin{equation}
    \tanh (z) = \frac{e^z - e^{- z}}{e^z + e^{- z}}
  \end{equation}
  Substitute $z = \log (1 + x^2)$ into $\tanh (z)$:
  \begin{equation}
    \tanh (\log (1 + x^2)) = \frac{e^{\log (1 + x^2)} - e^{- \log (1 +
    x^2)}}{e^{\log (1 + x^2)} + e^{- \log (1 + x^2)}}
  \end{equation}
  Using the property of exponentials, $e^{\log (a)} = a$ and $e^{- \log (a)} =
  \frac{1}{a}$, simplify:
  \begin{equation}
    e^{\log (1 + x^2)} = 1 + x^2, \quad e^{- \log (1 + x^2)} = \frac{1}{1 +
    x^2}
  \end{equation}
  Substitute these into the expression:
  \[ \tanh (\log (1 + x^2)) = \frac{(1 + x^2) - \frac{1}{1 + x^2}}{(1 + x^2) +
     \frac{1}{1 + x^2}} . \]
  Simplify the numerator and denominator by finding a common denominator of $1
  + x^2$:
  \[ \tanh (\log (1 + x^2)) = \frac{\frac{(1 + x^2)^2 - 1}{1 + x^2}}{\frac{(1
     + x^2)^2 + 1}{1 + x^2}} . \]
  Cancel the common factor of $1 + x^2$ in the numerator and denominator:
  \[ \tanh (\log (1 + x^2)) = \frac{(x^2 + 1)^2 - 1}{(x^2 + 1)^2 + 1} . \]
  Thus, we have shown that:
  \[ \tanh (\log (1 + x^2)) = \frac{(x^2 + 1)^2 - 1}{1 + (x^2 + 1)^2} . \]
  This completes the proof.
\end{proof}

\end{document}
